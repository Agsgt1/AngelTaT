<script src="../habitat-embed.js"></script>
<script>
	Habitat.registerEverything()

	const root = new State("root")
	const idle = new State("idle")
	const pointing = new State("pointing")
	const clicking = new State("clicking")
	const dragging = new State("dragging")

	root.add(pointing)
	root.add(idle)
	pointing.add(dragging)
	pointing.add(clicking)

	addEventListener("pointerdown", () => {
		root.fire("pointerdown")
	})

	addEventListener("pointermove", () => {
		root.fire("pointermove")
	})

	addEventListener("pointerup", () => {
		root.fire("pointerup")
	})

	root.pointerdown = () => {
		return clicking
	}

	pointing.pointerup = () => {
		return root
	}

	pointing.pointermove = () => {
		return dragging
	}
</script>
